<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Genshin Impact</title>
  <style>
    body {
      font-family: Roboto, sans-serif;
      background: #C9DBF000;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: auto;
      background: #ffffff;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    }
    h1 {
      text-align: center;
      margin-bottom: 8px;
      font-size: 18px;
    }
    .subtitle {
      text-align: center;
      margin-bottom: 24px;
      color: #555;
      font-size: 10px;
    }
    .section-title {
      font-size: 12px;
      margin: 20px 0 10px;
      border-bottom: 2px solid #eee;
      padding-bottom: 6px;
    }
    ul.pricelist {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    ul.pricelist li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 10px;
      border-radius: 10px;
      background: #fafafa;
      margin-bottom: 6px;
      border: 1px solid #eee;
      font-size: 10px;
      cursor: pointer;
      transition: background 0.15s, transform 0.05s;
    }
    ul.pricelist li:nth-child(odd) {
      background: #fefefe;
    }
    ul.pricelist li:hover {
      background: #e9f3ff;
      transform: translateY(-1px);
    }
    .item-name {
      font-weight: 500;
    }
    .item-code {
      display: none;
    }
    .item-price {
      font-weight: 600;
      color: #007bff;
      white-space: nowrap;
    }

    /* FORM ORDER */
    form {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 8px;
    }
    form label {
      font-size: 12px;
      margin-top: 4px;
    }
    form input,
    form select {
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #dddddd;
      font-size: 10px;
    }
    form button[type="submit"] {
      margin-top: 10px;
      padding: 10px 14px;
      border: none;
      border-radius: 999px;
      font-weight: 600;
      cursor: pointer;
      background: #4E5E7D;
      color: #ffffff;
      font-size: 13px;
    }

    .qty-wrapper {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .qty-btn {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      border: 1px solid #cccccc;
      background: #f5f5f5;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .qty-btn:active {
      background: #e0e0e0;
    }
    #orderQty {
      width: 48px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Genshin Impact</h1>
    <div class="subtitle">Hoyoverse â€¢ Proses via UID</div>

    <!-- Genesis Crystals -->
    <div class="section">
      <div class="section-title">ðŸ’Ž Genesis Crystals</div>
      <ul class="pricelist">
        <li data-item="60 GC" data-price="14000">
          <span class="item-name">60 GC<span class="item-code">GI_ID_60GC</span></span>
          <span class="item-price"></span>
        </li>
        <li data-item="330 GC" data-price="60000">
          <span class="item-name">330 GC<span class="item-code">GI_ID_330GC</span></span>
          <span class="item-price"></span>
        </li>
        <li data-item="1.090 GC" data-price="180000">
          <span class="item-name">1.090 GC<span class="item-code">GI_ID_1090GC</span></span>
          <span class="item-price"></span>
        </li>
        <li data-item="2.240 GC" data-price="380000">
          <span class="item-name">2.240 GC<span class="item-code">GI_ID_2240GC</span></span>
          <span class="item-price"></span>
        </li>
        <li data-item="3.880 GC" data-price="595000">
          <span class="item-name">3.880 GC<span class="item-code">GI_ID_3880GC</span></span>
          <span class="item-price"></span>
        </li>
        <li data-item="8.080 GC" data-price="1200000">
          <span class="item-name">8.080 GC<span class="item-code">GI_ID_8080GC</span></span>
          <span class="item-price"></span>
        </li>
      </ul>
    </div>

    <!-- Welkin Moon -->
    <div class="section">
      <div class="section-title">ðŸŒ™ Blessing Welkin Moon</div>
      <ul class="pricelist">
        <li data-item="Welkin 1x" data-price="60000">
          <span class="item-name">Welkin 1x<span class="item-code">GI_ID_W1</span></span>
          <span class="item-price"></span>
        </li>
        <li data-item="Welkin 2x" data-price="120000">
          <span class="item-name">Welkin 2x<span class="item-code">GI_ID_W2</span></span>
          <span class="item-price"></span>
        </li>
        <li data-item="Welkin 3x" data-price="179000">
          <span class="item-name">Welkin 3x<span class="item-code">GI_ID_W3</span></span>
          <span class="item-price"></span>
        </li>
      </ul>
    </div>

    <!-- FORM ORDER -->
    <div class="section">
      <div class="section-title">Form Order</div>

      <form id="orderForm" onsubmit="sendToWhatsApp(event)">
        <label for="userId">UID:</label>
        <input
          type="text"
          id="userId"
          placeholder="contoh: 800000000"
          required
        />

        <!-- DROPDOWN SERVER BARU -->
        <label for="server">Server:</label>
        <select id="server" required>
          <option value="" disabled selected>Pilih server</option>
          <option value="Asia">Asia</option>
          <option value="America">America</option>
          <option value="Europe">Europe</option>
          <option value="TW/HK/MO">TW/HK/MO</option>
        </select>

        <label for="nickname">Nickname in game:</label>
        <input
          type="text"
          id="nickname"
          placeholder="nickname kamu"
          required
        />

        <label for="orderSelect">Order:</label>
        <select id="orderSelect" required>
          <option value="" disabled selected>Pilih produk</option>

          <!-- Genesis Crystals -->
          <option value="60 GC" data-price="14000">60 GC</option>
          <option value="330 GC" data-price="60000">330 GC</option>
          <option value="1.090 GC" data-price="180000">1.090 GC</option>
          <option value="2.240 GC" data-price="380000">2.240 GC</option>
          <option value="3.880 GC" data-price="595000">3.880 GC</option>
          <option value="8.080 GC" data-price="1200000">8.080 GC</option>

          <!-- Welkin Moon -->
          <option value="Welkin 1x" data-price="60000">Welkin 1x</option>
          <option value="Welkin 2x" data-price="120000">Welkin 2x</option>
          <option value="Welkin 3x" data-price="179000">Welkin 3x</option>
        </select>

        <label>Jumlah order:</label>
        <div class="qty-wrapper">
          <button type="button" class="qty-btn" onclick="changeQty(-1)">âˆ’</button>
          <input type="number" id="orderQty" value="1" min="1" readonly />
          <button type="button" class="qty-btn" onclick="changeQty(1)">+</button>
        </div>

        <label for="orderPrice">Total Harga:</label>
        <input
          type="text"
          id="orderPrice"
          placeholder="Rp 0"
          readonly
        />

        <button type="submit">Kirim ke WhatsApp</button>
      </form>
    </div>
  </div>

  <script>
    // Format Rp pakai titik
    function formatRupiah(value) {
      var numberString = String(value).replace(/[^0-9]/g, '');
      if (!numberString) return '';
      return 'Rp ' + numberString.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
    }

    function updateTotal() {
      var select = document.getElementById('orderSelect');
      var qtyInput = document.getElementById('orderQty');
      var priceInput = document.getElementById('orderPrice');
      if (!select || !qtyInput || !priceInput) return;

      var option = select.options[select.selectedIndex];
      if (!option) {
        priceInput.value = '';
        return;
      }
      var basePrice = option.getAttribute('data-price');
      var qty = parseInt(qtyInput.value, 10) || 1;

      if (!basePrice) {
        priceInput.value = '';
        return;
      }
      var total = parseInt(basePrice, 10) * qty;
      priceInput.value = formatRupiah(total);
    }

    function changeQty(delta) {
      var qtyInput = document.getElementById('orderQty');
      if (!qtyInput) return;
      var current = parseInt(qtyInput.value, 10) || 1;
      current += delta;
      if (current < 1) current = 1;
      qtyInput.value = current;
      updateTotal();
    }

    // Klik pricebox â†’ auto pilih di dropdown + qty = 1
    function selectProduct(item) {
      var select = document.getElementById('orderSelect');
      var qtyInput = document.getElementById('orderQty');
      if (select) {
        for (var i = 0; i < select.options.length; i++) {
          if (select.options[i].value === item) {
            select.selectedIndex = i;
            break;
          }
        }
      }
      if (qtyInput) qtyInput.value = 1;
      updateTotal();
    }

    // Kirim form ke WhatsApp
    function sendToWhatsApp(e) {
      e.preventDefault();
      var userId = document.getElementById('userId').value.trim();
      var server = document.getElementById('server').value.trim();
      var nickname = document.getElementById('nickname').value.trim();
      var select = document.getElementById('orderSelect');
      var qty = document.getElementById('orderQty').value.trim();
      var price = document.getElementById('orderPrice').value.trim();

      var orderText = '';
      if (select && select.value) {
        orderText = select.value;
      }

      var message =
        '**Order Genshin Impact**\n' +
        'UID: ' + userId + '\n' +
        'Server: ' + server + '\n' +
        'Nickname in game: ' + nickname + '\n' +
        'Order: ' + orderText + '\n' +
        'Jumlah: x' + qty + '\n' +
        'Total Harga: ' + price;

      var phone = '6283197962700';
      var url = 'https://wa.me/' + phone + '?text=' + encodeURIComponent(message);
      window.open(url, '_blank');
    }

    // Inisialisasi: isi harga di list + klik pricebox
    document.addEventListener('DOMContentLoaded', function () {
      var items = document.querySelectorAll('.pricelist li');
      for (var i = 0; i < items.length; i++) {
        (function (li) {
          var item = li.getAttribute('data-item');
          var price = li.getAttribute('data-price');
          var priceSpan = li.querySelector('.item-price');

          if (priceSpan && price) {
            priceSpan.textContent = formatRupiah(price);
          }

          li.addEventListener('click', function () {
            selectProduct(item);
            var form = document.getElementById('orderForm');
            if (form) {
              form.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          });
        })(items[i]);
      }

      var select = document.getElementById('orderSelect');
      if (select) {
        select.addEventListener('change', updateTotal);
      }
    });
  </script>
</body>
</html>
